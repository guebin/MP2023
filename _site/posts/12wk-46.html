<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.520">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="최규빈">
<meta name="dcterms.date" content="2023-11-21">

<title>MP2023 - 12wk-46: 평가지표의 이해</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">MP2023</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../offline.html"> 
<span class="menu-text"><strong>대면수업</strong></span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/guebin/MP2023"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/channel/UCQk9RyBNgXc7ORIsYlOfQrg/playlists?view=50&amp;sort=dd&amp;shelf_id=2"> <i class="bi bi-youtube" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#강의영상" id="toc-강의영상" class="nav-link active" data-scroll-target="#강의영상">1. 강의영상</a></li>
  <li><a href="#다양한-평가지표들" id="toc-다양한-평가지표들" class="nav-link" data-scroll-target="#다양한-평가지표들">2. 다양한 평가지표들</a></li>
  <li><a href="#confusion-matrix의-이해" id="toc-confusion-matrix의-이해" class="nav-link" data-scroll-target="#confusion-matrix의-이해">3. Confusion Matrix의 이해</a></li>
  <li><a href="#암기를-위한-상황극" id="toc-암기를-위한-상황극" class="nav-link" data-scroll-target="#암기를-위한-상황극">4. 암기를 위한 상황극</a>
  <ul class="collapse">
  <li><a href="#a.-accuracy" id="toc-a.-accuracy" class="nav-link" data-scroll-target="#a.-accuracy">A. Accuracy</a></li>
  <li><a href="#b.-tpr-recallsensitivity" id="toc-b.-tpr-recallsensitivity" class="nav-link" data-scroll-target="#b.-tpr-recallsensitivity">B. TPR (=Recall=Sensitivity)</a></li>
  <li><a href="#c.-precision" id="toc-c.-precision" class="nav-link" data-scroll-target="#c.-precision">C. Precision</a></li>
  <li><a href="#d.-f1-score" id="toc-d.-f1-score" class="nav-link" data-scroll-target="#d.-f1-score">D. F1-score</a></li>
  <li><a href="#e.-specificity" id="toc-e.-specificity" class="nav-link" data-scroll-target="#e.-specificity">E. Specificity</a></li>
  <li><a href="#f.-fpr" id="toc-f.-fpr" class="nav-link" data-scroll-target="#f.-fpr">F. FPR</a></li>
  <li><a href="#f.-roc-curve" id="toc-f.-roc-curve" class="nav-link" data-scroll-target="#f.-roc-curve">F. ROC curve</a></li>
  <li><a href="#g.-auc" id="toc-g.-auc" class="nav-link" data-scroll-target="#g.-auc">G. AUC</a></li>
  </ul></li>
  <li><a href="#hw" id="toc-hw" class="nav-link" data-scroll-target="#hw">5. HW</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="12wk-46.out.ipynb" download="12wk-46.out.ipynb"><i class="bi bi-journal-code"></i>Jupyter</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">12wk-46: 평가지표의 이해</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>최규빈 </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 21, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="강의영상" class="level1">
<h1>1. 강의영상</h1>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/playlist?list=PLQqh36zP38-zhlDK0V5Zdk3H30SE8kN5D&amp;si=gfxmoP14Cs7KFFtl" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</section>
<section id="다양한-평가지표들" class="level1">
<h1>2. 다양한 평가지표들</h1>
<p><code>-</code> 의문: 왜 다양한 평가지표가 필요한가? (그냥 accuray면 끝나는거 아닌가? 더 이상 뭐가 필요해?)</p>
<p><code>-</code> 여러가지 평가지표들: <a href="https://en.wikipedia.org/wiki/Positive_and_negative_predictive_values" class="uri">https://en.wikipedia.org/wiki/Positive_and_negative_predictive_values</a></p>
<ul>
<li>이걸 다 암기하는건 불가능함.</li>
<li>몇 개만 뽑아서 암기하고 왜 쓰는지만 생각해보고 넘어가자!</li>
</ul>
</section>
<section id="confusion-matrix의-이해" class="level1">
<h1>3. Confusion Matrix의 이해</h1>
<p><code>-</code> 표1</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">퇴사(예측)</th>
<th style="text-align: center;">안나감(예측)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">퇴사(실제)</td>
<td style="text-align: center;">TP</td>
<td style="text-align: center;">FN</td>
</tr>
<tr class="even">
<td style="text-align: center;">안나감(실제)</td>
<td style="text-align: center;">FP</td>
<td style="text-align: center;">TN</td>
</tr>
</tbody>
</table>
<p><code>-</code> 표2 (책에없음)</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">퇴사(예측)</th>
<th style="text-align: center;">안나감(예측)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">퇴사(실제)</td>
<td style="text-align: center;"><span class="math inline">\((y,\hat{y})=\)</span> (O,O)</td>
<td style="text-align: center;"><span class="math inline">\((y,\hat{y})=\)</span>(O,X)</td>
</tr>
<tr class="even">
<td style="text-align: center;">안나감(실제)</td>
<td style="text-align: center;"><span class="math inline">\((y,\hat{y})=\)</span>(X,O)</td>
<td style="text-align: center;"><span class="math inline">\((y,\hat{y})=\)</span>(X,X)</td>
</tr>
</tbody>
</table>
<p><code>-</code> 표3 (책에없음)</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">퇴사(예측)</th>
<th style="text-align: center;">안나감(예측)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">퇴사(실제)</td>
<td style="text-align: center;">TP, <span class="math inline">\(\# O/O\)</span></td>
<td style="text-align: center;">FN, <span class="math inline">\(\#O/X\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">안나감(실제)</td>
<td style="text-align: center;">FP, <span class="math inline">\(\#X/O\)</span></td>
<td style="text-align: center;">TN, <span class="math inline">\(\#X/X\)</span></td>
</tr>
</tbody>
</table>
<ul>
<li>암기법, (1) 두번째 글자를 그대로 쓴다 (2) 첫글자가 T이면 분류를 제대로한것, 첫글자가 F이면 분류를 잘못한것</li>
</ul>
</section>
<section id="암기를-위한-상황극" class="level1 page-columns page-full">
<h1>4. 암기를 위한 상황극</h1>
<p><code>-</code> 통계학과를 졸업한 최규빈은 입사하여 “퇴사자 예측시스템”의 개발에 들어갔다.</p>
<p><code>-</code> 자료의 특성상 대부분의 사람이 퇴사하지 않고 회사에 잘 다닌다. 즉 1000명이 있으면 10명정도 퇴사한다.</p>
<section id="a.-accuracy" class="level2">
<h2 class="anchored" data-anchor-id="a.-accuracy">A. Accuracy</h2>
<p><code>-</code> 느낌: 정답율</p>
<p><code>-</code> 정의: <span class="math inline">\(\text{accuracy}=\frac{TP+TN}{total}=\frac{\#O/O+ \#X/X}{total}\)</span></p>
<ul>
<li>한국말로는 정확도, 정분류율이라고 한다.</li>
<li>한국말이 헷갈리므로 그냥 영어를 외우는게 좋다.</li>
</ul>
<p><code>-</code> (상확극 시점1) 왜 애큐러시는 불충분한가?</p>
<ul>
<li>회사: 퇴사자예측프로그램 개발해. 잘 맞출수록 좋고, 계산에 많은 시간이 걸리지 않는 가벼운 <code>predictor</code>일수록 좋아.</li>
<li>최규빈: 귀찮은데 다 안나간다고 하자! -&gt; 99퍼의 accuracy</li>
</ul>
<blockquote class="blockquote">
<p>모델에 사용한 파라메터 = 0. 그런데 애큐러시 = 99! 이거 엄청 좋은 모형이다?</p>
</blockquote>
</section>
<section id="b.-tpr-recallsensitivity" class="level2">
<h2 class="anchored" data-anchor-id="b.-tpr-recallsensitivity">B. TPR (=Recall=Sensitivity)</h2>
<p><code>-</code> 느낌: 이상상황 감지율!</p>
<p><code>-</code> 정의: <span class="math inline">\(\text{recall}=\text{sensitivity}=\text{TPR}=\frac{TP}{TP+FN}=\frac{\# O/O}{\# O/O+\# O/X}\)</span></p>
<ul>
<li>분모: 실제 O인 관측치 수</li>
<li>분자: 실제 O를 O라고 예측한 관측치 수</li>
<li>뜻: 실제 O를 O라고 예측한 비율</li>
</ul>
<p><code>-</code> (상황극 시점2) 우리가 recall을 봐야하는 이유</p>
<ul>
<li>인사팀: 실제 퇴사자를 퇴사자로 예측해야 의미가 있음! 우리는 퇴사할것 같은 10명을 찍어달란 의미였어요! (그래야 면담을 하든 할거아냐!)</li>
<li>최규빈: 계산빠르고 잘 맞추는 <code>predictor</code> 만들어 달라면서요? 제 <code>predictor</code>는 계산시간은 0이고, accuracy는 0.99에요.</li>
<li>인사팀: (고민중..) 사실 생각해보니까 이 경우는 accuracy는 의미가 없네. 실제 나간 사람 중 최규빈이 나간다고 한 사람이 몇인지 카운트 하는게 더 의미가 있겠다. 우리는 앞으로 <strong>recall</strong>을 보겠다!</li>
</ul>
<blockquote class="blockquote">
<p>예시1: 실제로 퇴사한 10명중 최규빈이 나간다고 찍은 사람이 5명이면 <code>recall=0.5</code>.</p>
</blockquote>
<blockquote class="blockquote">
<p>예시2: 최규빈이 아무도 나가지 않는다고 예측해버린다? 실제 10명중에서 최규빈이 나간다고 적중시킨사람은 0명이므로 이 경우는 <code>recall=0</code>.</p>
</blockquote>
<ul>
<li>인사팀 결론: 우리가 필요한건 <strong>recall</strong> 이니까 앞으로 <strong>recall</strong>을 가져와! accuracy는 큰 의미없어. (그래도 명색이 모델인데 accuracy가 90은 되면 좋겠다.)</li>
</ul>
</section>
<section id="c.-precision" class="level2">
<h2 class="anchored" data-anchor-id="c.-precision">C. Precision</h2>
<p><code>-</code> 느낌: 적중률..</p>
<p><code>-</code> 정의: <span class="math inline">\(\text{precision}=\frac{TP}{TP+FP}=\frac{\# O/O}{\# O/O+\# X/O}\)</span></p>
<ul>
<li>분모: O라고 예측한 관측치</li>
<li>분자: O라고 예측한 관측치중 진짜 O인 관측치</li>
<li>뜻: O라고 예측한 관측치중 진짜 O인 비율</li>
</ul>
<p><code>-</code> (상황극 시점3) Recall 만으로 불충분한 이유</p>
<ul>
<li>최규빈: 에휴.. 귀찮은데 그냥 좀 만 수틀리면 다 나갈것 같다고 해야겠다. -&gt; 한 100명 나간다고 했음 -&gt; 실제로 최규빈이 찍은 100명중에 10명이 다 나감!</li>
</ul>
<blockquote class="blockquote">
<p>이 경우 accuracy는 91%, recall은 100% (퇴사자 10명을 일단은 다 맞췄으므로).</p>
</blockquote>
<ul>
<li><p>인사팀: (화가 많이 남) 멀쩡한 사람까지 다 퇴사할 것 같다고 하면 어떡해요? 최규빈 연구원이 나간다고 한 100명중에 실제로 10명만 나갔어요.</p></li>
<li><p>인사팀: 마치 총으로 과녁중앙에 맞춰 달라고 했더니 기관총을 가져와서 한번 긁은것이랑 뭐가 달라요? 맞추는게 문제가 아니고 <strong>precision</strong>이 너무 낮아요.</p></li>
<li><p>최규빈: 저번 요청사항이 accuracy 90% 이상, recall은 높을수록 좋다는게 주문 아니었나요? 제 <code>predictor</code>는 accuracy가 91% 그리고 recall은 100% 입니다.</p></li>
<li><p>인사팀: (고민중..) 앞으로는 recall과 함께 precision도 같이 제출하세요. 여기에서 precision은 당신이 나간다고 한 사람중에 실제 나간사람의 비율을 의미해요. 이 경우는 <span class="math inline">\(\frac{10}{100}\)</span>이니까 precision이 10%입니다.</p></li>
<li><p>인사팀 속마음: Recall 올리겠다고 무작정 너무 많이 예측하지 말란 말이야!</p></li>
</ul>
</section>
<section id="d.-f1-score" class="level2">
<h2 class="anchored" data-anchor-id="d.-f1-score">D. F1-score</h2>
<p><code>-</code> 느낌: 적중률과 민감도의 균형</p>
<p><code>-</code> 정의: Recall과 precision의 조화평균</p>
<p><code>-</code> (상황극 시점4) recall, precision을 모두 고려</p>
<ul>
<li><p>최규빈: 그런데 recall/precision을 같이 내는건 좋은데요, 둘은 trade off의 관계에 있습니다. 물론 둘다 올리는 모형이 있다면 좋지만 그게 쉽지는 않아요. 보통은 precision을 올리려면 recall이 희생되는 면이 있고요, recall을 올리려고 하면 precision이 다소 떨어집니다.</p></li>
<li><p>최규빈: 평가기준이 애매하다는 의미입니다. 모형1,2가 있는데 모형1은 모형2보다 precision이 약간 좋고 대신 recall이 떨어진다면 모형1이 좋은것입니까? 아니면 모형2가 좋은것입니까?</p></li>
<li><p>인사팀: 그렇다면 둘을 평균내서 F1-score를 계산해서 제출해주세요.</p></li>
</ul>
<blockquote class="blockquote">
<p>속마음: AUC 쓰면 더 좋은뎅..</p>
</blockquote>
</section>
<section id="e.-specificity" class="level2">
<h2 class="anchored" data-anchor-id="e.-specificity">E. Specificity</h2>
<p><code>-</code> 느낌: 안나갈 사람을 안나갔다고 찾아낸 비율</p>
<p><code>-</code> 정의: <span class="math inline">\(\text{specificity}=\frac{TN}{FP+TN}=\frac{\# X/X}{\# X/O+\# X/X}\)</span></p>
<p><code>-</code> 안중요함</p>
</section>
<section id="f.-fpr" class="level2">
<h2 class="anchored" data-anchor-id="f.-fpr">F. FPR</h2>
<p><code>-</code> 느낌: 생사람 잡은 사람의 비율 (오해해서 미안하다, TPR올릴려다 보니까 어쩔수 없었네)</p>
<blockquote class="blockquote">
<p>TPR(=recall)을 올리는 가장 편한방법은, 조금만 이상한 징조가 있어도 “너 나갈것 같은데?”라고 몰아가는 것이다. 하지만 이러한 방식은 적중률의 문제가 있다. 또한 멀쩡히 잘 다니고 있는 사람을 생트집 잡아 몰아간다는 문제도 있다.</p>
</blockquote>
<p><code>-</code> 정의: <span class="math inline">\(\text{FPR}=1-\text{specificity}=\frac{FP}{FP+TN}\)</span>=<span class="math inline">\(\frac{\# X/O}{\# X/O+\# X/X}\)</span></p>
<p><code>-</code> 예시: 아래의 상황을 고려하자.</p>
<ul>
<li>총 회사원 1000명.</li>
<li>최규빈 연구원이 “퇴사할것 같은 사람”으로 찍은 직원은 100명.</li>
<li>실제 퇴사자 10명, 실제퇴사자 10중 최규빈 연구원이 나간다고 한 사람은 8명.</li>
<li>실제 퇴사자중 최규빈 연구원이 눈치채지 못한 사람은 2명.</li>
<li>최규빈은 92명의 생사람을 잡음..</li>
</ul>
<p>정리하면</p>
<ul>
<li>O/O = 8</li>
<li>O/X = 2</li>
<li>X/O = 92</li>
<li>X/X = 898</li>
</ul>
<div id="3941aea7-0e48-4e06-af6a-df27ec623a0d" class="cell" data-tags="[]" data-execution_count="9">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>recall <span class="op">=</span> TPR <span class="op">=</span> <span class="dv">8</span><span class="op">/</span><span class="dv">10</span> <span class="co"># OO/(OO+OX)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="9bea16ff-cadc-4397-9a09-8c0a1e785e96" class="cell" data-tags="[]" data-execution_count="10">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>precision <span class="op">=</span> <span class="dv">8</span><span class="op">/</span><span class="dv">100</span> <span class="co"># OO/(OO+XO)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ba649b45-de3b-4255-99a1-d2922272ce13" class="cell" data-tags="[]" data-execution_count="20">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>FPR <span class="op">=</span> <span class="dv">92</span><span class="op">/</span><span class="dv">990</span> <span class="co"># XO/(XO+XX) # 분모의미: 억울한사람이 되려면 일단 열시미 다니고 있어야함</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="fa9b1125-7fb8-45cf-aa05-36ac6916ba68" class="cell" data-tags="[]" data-execution_count="18">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>precision, FPR <span class="co"># 비슷해보이는데 좀 다르죠?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>(0.08, 0.09292929292929293)</code></pre>
</div>
</div>
</section>
<section id="f.-roc-curve" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="f.-roc-curve">F. ROC curve</h2>
<p><code>-</code> 휴식: 무빙.. (이영미 교수님<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>이 재밋다해서..)</p>
<div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;봄날의 햇살</p></li></div><div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/iV6x1HbwU00?si=G93t_vAuMWyJWPGA" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<ul>
<li><code>predictor</code>: 박병은</li>
<li>박과장!! 약속과 다르지 않소!! –&gt; 사살 –&gt; 진짜 간첩이었으므로 사살하는 순간 precision/recall 동시에 상승</li>
<li>동해물과 백두산이… –&gt; 사살 –&gt; 이 사람은 진짜 간첩인지 아닌지 확실하지 않음. 그렇지만 사살함. 따라서 recall은 올라갈 수는 있겠으나 precision 하락 및 FPR 상승의 위험이 있음.</li>
<li>이런 미친새끼.. 여기서 억울한 휴민트들이 얼마나.. –&gt; 너처럼 계속 classification하면 FPR이 너무 높아진다는 의미</li>
<li>괜찮아.. 내가 알아서 할게 –&gt; 난 FPR 높아도 괜찮아, 위험감수하고 TPR 올리고 싶어. 이런 내 결정은 내가 알아서 책임질게</li>
</ul>
<p><code>-</code> 소감: 총을 얼마나 민감하게 당길지를 결정함에 따라서 FPR과 TRP의 값이 수시로 달라진다.</p>
<p><code>-</code> 정의: <span class="math inline">\(x\)</span>축=FPR, <span class="math inline">\(y\)</span>축=TPR 을 그린 커브</p>
<p><code>-</code> 의미:</p>
<ul>
<li>“x=생사람잡은비율” vs “y=이상상황감지율=recall”을 그린 곡선이 ROC커브이다.</li>
<li>생각해보면 생사람을 잡을 수록 (=<span class="math inline">\(x\)</span>값이 커질수록) 감지율이 높아진다 (=<span class="math inline">\(y\)</span>값도 커진다).</li>
<li>생사람 잡은 비율이 매우 적은데 (=<span class="math inline">\(x\)</span>값이 작은데) 감지율이 높으면 매우 우수한 <code>predictor</code> 이다.</li>
<li>따라서 초반부터 ROC curve가 급격하게 상승하면 좋은 predictor 이다.</li>
</ul>
</section>
<section id="g.-auc" class="level2">
<h2 class="anchored" data-anchor-id="g.-auc">G. AUC</h2>
<p><code>-</code> 정의: ROC curve의 밑면적</p>
</section>
</section>
<section id="hw" class="level1">
<h1>5. HW</h1>
<p>밀실안에 100명의 사람이 있다고 하자. 이중 이중휴민트는 2명이 있다고 하자. 이중휴민트를 잡기위해서 3명을 사살했다고 하자. 사살된 사람중 실제 이중휴민트는 1명이었다고 하자. 이 경우</p>
<ul>
<li>accurary</li>
<li>TPR(=recall)</li>
<li>precision</li>
<li>FPR</li>
</ul>
<p>값을 계산하라.</p>


</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="guebin/MP2023" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->




</body></html>